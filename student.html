<html>
<title>Buzzer!</title>

<body>
<canvas id="myCanvas" width="400" height="400" style="border:2px solid #000000;"></canvas>
<h1 id="buzzBtn">Buzz!</h1>
</br>
<h1 id="clrBtn">Clear!</h1>
</br>

<form id="idForm" action="javascript:connect();">
ID: <input type="text" name="sessionId" id="sessionID"></br>
Name:<input type="text" name="user" id="user">
<input type="submit" value="Go">
</form>
<div id="new">New Server</div>

</body>
</html>
<script src="/socket.io/socket.io.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script>
  var x=10;
  var y=10;
  var socket= io.connect(); 
  var sessionId;

function connect(){
  var user = $("#user").val();
  sessionId=$("#sessionID").val();
  socket.emit('subscribe',sessionId,user);
  $("#idForm").hide();
  $("#new").show();
}    

  socket.on('buzzed', function(user){
    var c=document.getElementById("myCanvas");
    var ctx=c.getContext("2d");
    ctx.fillStyle="#FF0000";
    ctx.fillRect(0,0,400,400);
    ctx.fillStyle="#000000";
    ctx.font="30px Arial";
    ctx.fillText(user,150,150);
  });

  socket.on('clearCanvas',function(){
    var c=document.getElementById("myCanvas");
    var ctx=c.getContext("2d");
     ctx.clearRect(0, 0,400,400);
  });
    
$("#buzzBtn").click(function(){
    socket.emit('buzz');
});

$("#clrBtn").click(function(){
    socket.emit('clear');
});

$("#new").click(function(){
  $("#idForm").show();
  $("#new").hide();
});
 
</script>
